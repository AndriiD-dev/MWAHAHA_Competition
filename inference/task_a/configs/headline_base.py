from pathlib import Path
from inference.task_a.runner import RunnerConfig, DecodeConfig, RetryStep

RUNNER_CONFIG = RunnerConfig(
    task="title",
    base_model_id="Qwen/Qwen2.5-3B-Instruct",
    input_path=Path("data/task-a-title.csv"),
    output_dir=Path("outputs"),
    output_filename="task-a-title_predictions_base.tsv",
    batch_size=16,
    noun_seed_base=1337,
    replan_every=5,
    plan_decode=DecodeConfig(max_new_tokens=80, min_new_tokens=16, temperature=0.4, top_p=0.9),
    final_decode=DecodeConfig(max_new_tokens=32, min_new_tokens=6, temperature=0.8, top_p=0.95),
    max_retries=20,
    retry_steps=(
        RetryStep(0.90, 0.95, 40),
        RetryStep(0.95, 0.98, 40),
        RetryStep(1.00, 0.98, 48),
        RetryStep(1.05, 0.98, 48),
        RetryStep(1.10, 0.99, 56),
        RetryStep(0.90, 0.95, 40),
        RetryStep(0.95, 0.98, 40),
        RetryStep(1.00, 0.98, 48),
        RetryStep(1.05, 0.98, 48),
        RetryStep(1.10, 0.99, 56),
        RetryStep(0.90, 0.95, 40),
        RetryStep(0.95, 0.98, 40),
        RetryStep(1.00, 0.98, 48),
        RetryStep(1.05, 0.98, 48),
        RetryStep(1.10, 0.99, 56),
        RetryStep(0.90, 0.95, 40),
        RetryStep(0.95, 0.98, 40),
        RetryStep(1.00, 0.98, 48),
        RetryStep(1.05, 0.98, 48),
        RetryStep(1.10, 0.99, 56),
        RetryStep(0.90, 0.95, 40),
        RetryStep(0.95, 0.98, 40),
        RetryStep(1.00, 0.98, 48),
        RetryStep(1.05, 0.98, 48),
        RetryStep(1.10, 0.99, 56),
    ),
)
